`begin_keywords "1800-2017"
`line 1 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 1
 
 
 

`line 5 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 0
 

`line 7 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 0
module tlul_xbar_main (

`line 9 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 0
  input logic clk_i,
  input logic rst_ni,

`line 12 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 0
   
  input  tlul_pkg::tlul_h2d_t tl_ibexifu_i,
  output tlul_pkg::tlul_d2h_t tl_ibexifu_o,

`line 16 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 0
  input  tlul_pkg::tlul_h2d_t tl_ibexlsu_i,
  output tlul_pkg::tlul_d2h_t tl_ibexlsu_o,

`line 19 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 0
   
  output tlul_pkg::tlul_h2d_t tl_qspi_o,
  input  tlul_pkg::tlul_d2h_t tl_qspi_i,

`line 23 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 0
  output tlul_pkg::tlul_h2d_t tl_iccm_o,
  input  tlul_pkg::tlul_d2h_t tl_iccm_i,

`line 26 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 0
  output tlul_pkg::tlul_h2d_t tl_dccm_o,
  input  tlul_pkg::tlul_d2h_t tl_dccm_i,

`line 29 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 0
  output tlul_pkg::tlul_h2d_t tl_timer0_o,
  input  tlul_pkg::tlul_d2h_t tl_timer0_i,

`line 32 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 0
  output tlul_pkg::tlul_h2d_t tl_timer1_o,
  input  tlul_pkg::tlul_d2h_t tl_timer1_i,

`line 35 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 0
  output tlul_pkg::tlul_h2d_t tl_timer2_o,
  input  tlul_pkg::tlul_d2h_t tl_timer2_i,

`line 38 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 0
  output tlul_pkg::tlul_h2d_t tl_tic_o,
  input  tlul_pkg::tlul_d2h_t tl_tic_i,

`line 41 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 0
  output tlul_pkg::tlul_h2d_t tl_periph_o,
  input  tlul_pkg::tlul_d2h_t tl_periph_i,

`line 44 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 0
  output tlul_pkg::tlul_h2d_t tl_plic_o,
  input  tlul_pkg::tlul_d2h_t tl_plic_i,

`line 47 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 0
  output tlul_pkg::tlul_h2d_t tl_rom_o,
  input  tlul_pkg::tlul_d2h_t tl_rom_i
);

`line 51 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 0
  import tlul_pkg::*;
  import tlul_xbar_main_pkg::*;

`line 54 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 0
   
  tlul_pkg::tlul_h2d_t h0_dv_o[3];
  tlul_pkg::tlul_d2h_t h0_dv_i[3];
  tlul_pkg::tlul_h2d_t ibexifu_to_s1n;
  tlul_pkg::tlul_d2h_t s1n_to_ibexifu;
  logic [1:0]          device_sel_ifu;

`line 61 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 0
   
  tlul_pkg::tlul_h2d_t h1_dv_o[7];
  tlul_pkg::tlul_d2h_t h1_dv_i[7];
  tlul_pkg::tlul_h2d_t ibexlsu_to_s1n;
  tlul_pkg::tlul_d2h_t s1n_to_ibexlsu;
  logic [2:0]          device_sel_lsu;

`line 68 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 0
  assign ibexifu_to_s1n = tl_ibexifu_i;
  assign tl_ibexifu_o   = s1n_to_ibexifu;

`line 71 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 0
  assign ibexlsu_to_s1n = tl_ibexlsu_i;
  assign tl_ibexlsu_o   = s1n_to_ibexlsu;

`line 74 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 0
   
  assign tl_rom_o  = h0_dv_o[0];
  assign h0_dv_i[0] = tl_rom_i;

`line 78 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 0
  assign tl_qspi_o  = h0_dv_o[1];
  assign h0_dv_i[1] = tl_qspi_i;

`line 81 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 0
  assign tl_iccm_o  = h0_dv_o[2];
  assign h0_dv_i[2] = tl_iccm_i;

`line 84 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 0
   
  assign tl_dccm_o   = h1_dv_o[0];
  assign h1_dv_i[0]  = tl_dccm_i;

`line 88 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 0
  assign tl_timer0_o = h1_dv_o[1];
  assign h1_dv_i[1]  = tl_timer0_i;

`line 91 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 0
  assign tl_timer1_o = h1_dv_o[2];
  assign h1_dv_i[2]  = tl_timer1_i;

`line 94 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 0
  assign tl_timer2_o = h1_dv_o[3];
  assign h1_dv_i[3]  = tl_timer2_i;

`line 97 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 0
  assign tl_tic_o    = h1_dv_o[4];
  assign h1_dv_i[4]  = tl_tic_i;

`line 100 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 0
  assign tl_plic_o  = h1_dv_o[5];
  assign h1_dv_i[5] = tl_plic_i;

`line 103 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 0
  assign tl_periph_o  = h1_dv_o[6];
  assign h1_dv_i[6]   = tl_periph_i;

`line 106 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 0
   
  always_comb begin
    device_sel_ifu = 2'd3;

`line 110 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 0
    if ((ibexifu_to_s1n.a_address & ~(ADDR_MASK_ROM)) == ADDR_SPACE_ROM) begin
      device_sel_ifu = 2'd0;
    end else
    if ((ibexifu_to_s1n.a_address & ~(ADDR_MASK_QSPI)) == ADDR_SPACE_QSPI) begin
      device_sel_ifu = 2'd1;
    end else
    if ((ibexifu_to_s1n.a_address & ~(ADDR_MASK_ICCM)) == ADDR_SPACE_ICCM) begin
      device_sel_ifu = 2'd2;
    end
  end

`line 121 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 0
   
  always_comb begin
    device_sel_lsu = 3'd7;

`line 125 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 0
    if ((ibexlsu_to_s1n.a_address & ~(ADDR_MASK_DCCM)) == ADDR_SPACE_DCCM) begin
      device_sel_lsu = 3'd0;
    end else
    if ((ibexlsu_to_s1n.a_address & ~(ADDR_MASK_TIMER0)) == ADDR_SPACE_TIMER0) begin
      device_sel_lsu = 3'd1;
    end else
    if ((ibexlsu_to_s1n.a_address & ~(ADDR_MASK_TIMER1)) == ADDR_SPACE_TIMER1) begin
      device_sel_lsu = 3'd2;
    end else
    if ((ibexlsu_to_s1n.a_address & ~(ADDR_MASK_TIMER2)) == ADDR_SPACE_TIMER2) begin
      device_sel_lsu = 3'd3;
    end else
    if ((ibexlsu_to_s1n.a_address & ~(ADDR_MASK_TIC)) == ADDR_SPACE_TIC) begin
      device_sel_lsu = 3'd4;
    end else
    if ((ibexlsu_to_s1n.a_address & ~(ADDR_MASK_PLIC)) == ADDR_SPACE_PLIC) begin
      device_sel_lsu = 3'd5;
    end else
    if ((ibexlsu_to_s1n.a_address & ~(ADDR_MASK_PERIPH)) == ADDR_SPACE_PERIPH) begin
      device_sel_lsu = 3'd6;
    end
  end

`line 148 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 0
   
  tlul_socket_1n #(
    .HReqDepth (4'h0),
    .HRspDepth (4'h0),
    .DReqDepth (36'h0),
    .DRspDepth (36'h0),
    .N         (3)
  ) host_ifu (
    .clk_i        ( clk_i          ),
    .rst_ni       ( rst_ni         ),
    .tl_h_i       ( ibexifu_to_s1n  ),
    .tl_h_o       ( s1n_to_ibexifu  ),
    .tl_d_o       ( h0_dv_o        ),
    .tl_d_i       ( h0_dv_i        ),
    .dev_select_i ( device_sel_ifu )
  );

`line 165 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 0
   
  tlul_socket_1n #(
    .HReqDepth (4'h0),
    .HRspDepth (4'h0),
    .DReqDepth (36'h0),
    .DRspDepth (36'h0),
    .N         (7)
  ) host_lsu (
    .clk_i        ( clk_i          ),
    .rst_ni       ( rst_ni         ),
    .tl_h_i       ( ibexlsu_to_s1n  ),
    .tl_h_o       ( s1n_to_ibexlsu  ),
    .tl_d_o       ( h1_dv_o        ),
    .tl_d_i       ( h1_dv_i        ),
    .dev_select_i ( device_sel_lsu )
  );

`line 182 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 0
endmodule

`line 184 "../src/merl_azadi-II_azadi_common_1.0/rtl/tlul_xbar_main.sv" 2
