`begin_keywords "1800-2017"
`line 1 "../src/merl_azadi-II_azadi_rstmgr_1.0/rtl/clk_rst_mngr.sv" 1
 
 
 

`line 5 "../src/merl_azadi-II_azadi_rstmgr_1.0/rtl/clk_rst_mngr.sv" 0
 

`line 7 "../src/merl_azadi-II_azadi_rstmgr_1.0/rtl/clk_rst_mngr.sv" 0
module clk_rst_mngr (
  input logic clk_i,
  input logic sys_rst_ni,
  input logic por_ni,
  input logic ndm_rst_ni,
  input logic pll_lock_i,

`line 14 "../src/merl_azadi-II_azadi_rstmgr_1.0/rtl/clk_rst_mngr.sv" 0
  output logic clk_enb_o
);

`line 17 "../src/merl_azadi-II_azadi_rstmgr_1.0/rtl/clk_rst_mngr.sv" 0
  typedef enum logic [1:0] {IDLE, A_RESET, D_RESET} state_t;
  logic [15:0] clk_counter;
  logic        clk_enb;
  logic        count_enb;
  state_t      clk_cnt_state_c, clk_cnt_state_n;

`line 23 "../src/merl_azadi-II_azadi_rstmgr_1.0/rtl/clk_rst_mngr.sv" 0
  always_ff @(posedge clk_i or negedge por_ni) begin
    if(!por_ni) begin
      clk_counter     <= '0;
      clk_enb_o       <= '0;
      clk_cnt_state_n <= IDLE;
    end else if (pll_lock_i) begin
      clk_enb_o       <= clk_enb;
      clk_cnt_state_n <= clk_cnt_state_c;
      if(count_enb) begin
        clk_counter <= clk_counter + 16'd1;
      end else begin
        clk_counter <= '0;
      end
    end else begin
      clk_counter     <= '0;
      clk_enb_o       <= '0;
      clk_cnt_state_n <= IDLE;
    end
  end

`line 43 "../src/merl_azadi-II_azadi_rstmgr_1.0/rtl/clk_rst_mngr.sv" 0
  always_comb begin
    unique case (clk_cnt_state_n)
      IDLE: begin
        clk_enb   = 1'b1;
        count_enb = 1'b0;
        if(!sys_rst_ni) begin
          clk_cnt_state_c = A_RESET;
        end else begin
          clk_cnt_state_c = IDLE;
        end
      end

`line 55 "../src/merl_azadi-II_azadi_rstmgr_1.0/rtl/clk_rst_mngr.sv" 0
      A_RESET: begin
        clk_enb         = 1'b0;
        count_enb       = 1'b0;
        if(!sys_rst_ni) begin
          clk_cnt_state_c = A_RESET;
        end else begin
          clk_cnt_state_c = D_RESET;
        end
      end

`line 65 "../src/merl_azadi-II_azadi_rstmgr_1.0/rtl/clk_rst_mngr.sv" 0
      D_RESET: begin
        if(!sys_rst_ni) begin
          clk_cnt_state_c = A_RESET;
          clk_enb         = 1'b0;
          count_enb       = 1'b0;
        end else if(clk_counter != 16'd1000) begin
          clk_cnt_state_c = D_RESET;
          clk_enb         = 1'b0;
          count_enb       = 1'b1;
        end else begin
          clk_cnt_state_c = IDLE;
          clk_enb         = 1'b1;
          count_enb       = 1'b0;
        end
      end

`line 81 "../src/merl_azadi-II_azadi_rstmgr_1.0/rtl/clk_rst_mngr.sv" 0
      default: begin
        clk_cnt_state_c = IDLE;
        clk_enb         = 1'b1;
        count_enb       = 1'b0;
      end
    endcase
  end
endmodule : clk_rst_mngr

`line 90 "../src/merl_azadi-II_azadi_rstmgr_1.0/rtl/clk_rst_mngr.sv" 2
