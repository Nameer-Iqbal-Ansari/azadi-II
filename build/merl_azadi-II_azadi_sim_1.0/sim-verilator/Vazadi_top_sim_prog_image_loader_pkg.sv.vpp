`begin_keywords "1800-2017"
`line 1 "../src/merl_azadi-II_azadi_verif_1.0/prog_image_loader_pkg.sv" 1

package prog_image_loader_pkg;

`line 4 "../src/merl_azadi-II_azadi_verif_1.0/prog_image_loader_pkg.sv" 0
  function automatic void read_hex(string hex_file, ref bit [7:0] prog_image [int]);
    int       hex_fd;
    string    astring, addr_string;
    int       addr;
    bit [7:0] data;
  
    hex_fd = $fopen(hex_file, "r");
  
    if (hex_fd == 0)
      $fatal("Hex file not opened! Check path.");
    else 
      $display("Hex file opened succesfully!!!");
  
    addr = '0;
    while ($fscanf(hex_fd, "%s", astring) != 0 && !$feof(hex_fd)) begin
      if (astring[0] == "@" && astring.len() > 1) begin
        addr_string = astring.substr(1, astring.len()-1);
         
      end
      else begin
        data = astring.atohex();
        prog_image[addr] = data;
        addr++;
      end
    end
    $fclose(hex_fd);
  endfunction: read_hex

`line 32 "../src/merl_azadi-II_azadi_verif_1.0/prog_image_loader_pkg.sv" 0
endpackage: prog_image_loader_pkg

`line 34 "../src/merl_azadi-II_azadi_verif_1.0/prog_image_loader_pkg.sv" 2
